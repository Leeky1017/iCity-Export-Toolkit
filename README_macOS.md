# iCity 导出脚本使用手册（macOS）

这份手册给非技术用户，按步骤做即可。

## 1. 打开终端

1. 按 `Command + Space` 打开 Spotlight。
2. 输入 `Terminal`。
3. 回车打开终端。

## 2. 确认电脑有 Python

在终端输入：

```bash
python3 --version
```

如果看到类似 `Python 3.10.x`、`3.11.x`、`3.12.x` 就可以继续。

如果提示命令不存在：
1. 打开 https://www.python.org/downloads/macos/
2. 下载并安装 Python 3
3. 安装后重新打开终端再执行 `python3 --version`

## 3. 进入脚本所在文件夹

假设脚本在桌面 `icity_export.py`：

```bash
cd ~/Desktop
```

如果脚本在别的目录，就把路径改成你自己的。

## 4. 运行脚本（推荐方式）

```bash
python3 icity_export.py
```

说明：
- 脚本会一步步提问：账号、密码、目标用户、导出目录、文件前缀、是否生成按日 Markdown。
- 输入密码时不会显示字符，这是正常的。
- 如果某一步直接回车，会使用该步给出的默认值。

## 5. 首次运行会自动安装依赖

你不需要手动安装 `requests` 或 `beautifulsoup4`。

首次运行脚本会自动：
1. 在脚本目录创建 `.icity_export_venv`
2. 自动下载依赖
3. 自动重启脚本继续执行

首次通常要 1-3 分钟，取决于网络。

## 6. 导出结果在哪里

运行完成后会显示三类结果：
- `xxx.json`（结构化数据）
- `xxx.txt`（可直接阅读的文本）
- `xxx_md/`（按 `年/月/日` 拆分的 Markdown 文件夹）

默认会在你指定的 `--output-dir` 里。

## 7. 常见问题

### Q1: 提示网络错误
检查网络是否正常，然后重试。

### Q2: 提示登录失败
确认账号密码是否正确；若账号触发额外验证（如 2FA），需要先在网页端完成验证。

### Q3: 想导出别人的公开内容
在“目标用户”那一步输入对方用户 ID 即可（前提是你账号能看到对应内容）。
